<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Decorator</title>
	
	<meta name="description" content="A jQuery library for modern HTML presentations">
	<meta name="author" content="Caleb Troughton">
	<meta name="viewport" content="width=1024, user-scalable=no">
	
	<!-- Core and extension CSS files -->
	<link rel="stylesheet" href="../core/deck.core.css">
	<link rel="stylesheet" href="../extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="../extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="../extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="../extensions/status/deck.status.css">
	<link rel="stylesheet" href="../extensions/hash/deck.hash.css">
	<link rel="stylesheet" href="../extensions/scale/deck.scale.css">
	
	<!-- Style theme. More available in /themes/style/ or create your own. -->
	<link rel="stylesheet" href="../themes/style/swiss.css">
	
	<!-- Transition theme. More available in /themes/transition/ or create your own. -->
	<link rel="stylesheet" href="../themes/transition/horizontal-slide.css">
	
	<script src="../modernizr.custom.js"></script>
	

    <!-- SintaxHighlighter -->
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>SyntaxHighlighter Large File Demo</title>
	<script type="text/javascript" src="../SyntaxHighlighter-master/scripts/XRegExp.js"></script>
	<script type="text/javascript" src="../SyntaxHighlighter-master/scripts/shCore.js"></script>
	<script type="text/javascript" src="../SyntaxHighlighter-master/scripts/shBrushJava.js"></script>
	<script type="text/javascript" src="../SyntaxHighlighter-master/scripts/shBrushPlain.js"></script>
	<script type="text/javascript" src="../SyntaxHighlighter-master/scripts/shBrushPython.js"></script>
	<link type="text/css" rel="stylesheet" href="../SyntaxHighlighter-master/styles/shCoreEclipse.css"/>
	<!--link type="text/css" rel="stylesheet" href="../SyntaxHighlighter-master/styles/shThemeEclipse.css"/-->
	
	<script type="text/javascript">SyntaxHighlighter.all();</script>

	
	
</head>

<body class="deck-container">

<!-- Begin slides -->
<section class="slide" id="decorator1">
	<h2>Cafetería</h2>
	<p>Tenemos una cafetería que tiene una implementación inicial, y que esta creciendo rápidamente, agregando nuevos productos</p>

	<img src="firstDesign.png">
	<ul>
		<li>Beverage es una clase abstracta, heredada por todos los brebajes que se vendan en la cafetería.</li>
		<li>El método cost() es abstracto, las subclases necesitan crear su propia implementación, con el costo de cada brebaje</li>
		<li>Descripción es una variable de instancia que cada clase usa para guarda una descripción del producto.</li>
		<li>GetDescription() devuelve la descripción.</li>
	</ul>
</section>
<section class="slide" id="decorator2">
	<h2>Cafetería</h2>
	<p>Al los brebajes se le pueden agregar condimentos como leche, chocolate, leche y leche batida. La cafetería le carga el precio un poco por cada adicional, y tienen que reflejarlo en el precio final.</p>
	<img src="firstDesignAllClases.png">
	<p>Que pasa si el precio de la leche sube?</p>
	<p>Que pasa si se agrega un nuevo condimento</p>
	<p>Es obvio que este diseño no sirve, cada vez que quiero cambiar un precio de un adicional hay que cambiar todas las clases que lo usan</p>
</section>
<section class="slide" id="decorator3">
	<h2>Cafetería</h2>
	<h3>Otro diseño</h3>
	<p>Probamos con un diseño en el que representamos los condimentos y adicionales con variables de instancia.</p>
	<img src="secondDesign.png">
	<p>Variables de instancia booleanas para cada condimento para saber si tiene o no.</p>
	<p>Implementamos cost() en en en vez de dejarlo abstracto, las subclases van a sobreescribir cost() pero el cost() de la subclase va a usar el de la superclase, así pueden calcular el costo básico del brebaje de acuerdo a los adicionales en la supeclase y en la subclase sumarle el costo de los ingredientes agregados específicos.</p>
</section>
<section class="slide" id="decorator4">
	<h2>Cafetería</h2>
	<h3>Implementación supeclase Beverage</h3>
	<script type="syntaxhighlighter" class="brush: java; toolbar: false;">
	public abstract class Beverage {
		public String description;
		private boolean milk;
		private boolean soy;
		private boolean mocha;
		private boolean whip;
		
		private double milkCost  = 1.1;
		private double soyCost = 0.5;
		private double mochaCost = 1.3;
		private double whipCost = 0.9;
		
		public float cost(){
			float condimentCost = (float) 0.0;
			if (hasMilk()){
				condimentCost += milkCost;
			}
			if (hasMocha()){
				condimentCost += mochaCost;
			}
			if (hasSoy()){
				condimentCost += soyCost;
			}
			if (hasWhip()){
				condimentCost += whipCost;
			}
			return condimentCost;
		}
		public boolean hasMilk(){
			return milk;
		}
		public void setMilk(boolean has){
			this.milk = has;
		}
		public String getDescription() {
			return description;
		}
	}
	</script>
</section>
<section class="slide" id="decorator5">
	<h2>Cafetería</h2>
	<h3>Implementación de una de las subclases</h3>
	<script type="syntaxhighlighter" class="brush: java; toolbar: false;">
	public class DarkRoast extends Beverage{
		public DarkRoast(){
			description = "Most exelnt dark roast";
		}
		public float cost(){
			return (float) (1.99 + super.cost());
		}
	}
	</script>
	<h3>método main</h3>
	<script type="syntaxhighlighter" class="brush: java; toolbar: false;">
	public class StarbuzzCoffee {
		public static void main(String[] args) {
			Beverage beverage = new DarkRoast();
			
			System.out.println(beverage.getDescription() + " $" + beverage.cost());
			
			beverage.setMocha(true);
			beverage.setMilk(true);
			
			System.out.println(beverage.getDescription() + " $" + beverage.cost());
		}
	}
	</script>
</section>

<section class="slide" id="decorator6">
	<h2>Problemas de la implementación</h2>
	<p><strong>Qué requerimientos o factores pueden cambiar que puedan impactar en el diseño?</strong></p>
	<ul>
		<li>La implementación de hardcodear los valores en la superclase hacer que haya que modificar el código cada cambio de precio.<BR/>
		Esto se podría haber solucionado haciendo variables de clase en ves de instancia y cargándolos en el programa cuando corre.</li>
		<li>Condimentos nuevos hacen que haya que cambiar el método cost() de la suerclase.</li>
		<li>Todos los brebajes nuevos van a tener los métodos de todos los condimentos aunque no se posible por regla de negocio.</li>
		<li>Que pasa si uno quiere doble ración de condimento? (no podemos calcular el precio)</li>
	</ul>		
</section>
<section class="slide" id="decorator7">
	<h2>Problemas de la implementación</h2>
	<p><strong>Qué principios de diseño de los que vinos, no respetamos en esta implementación?</strong></p>
	<ol>
		<li>Identificar los aspectos de la aplicación que varían y separarlos de los que permanecen.</li>
		<li>Programar a interfaces, no a implementaciones</li>
		<li>Favorecer la composición sobre la herencia. "Tener un" puede ser mejor que "ser un".</li>
		<li>Esforzarse por diseños con acoplamiento débil entre los objetos que interactúan.</li>
	</ol>
</section>
<section class="slide" id="decorator8">
	<h2>Problemas de la implementación</h2>
	<p><strong>Qué principios de diseño de los que vinos, no respetamos en esta implementación?</strong></p>
	<ol>
		<li><strong>Identificar los aspectos de la aplicación que varían y separarlos de los que permanecen.</strong></li>
		<li>Programar a interfaces, no a implementaciones</li>
		<li><strong>Favorecer la composición sobre la herencia. "Tener un" puede ser mejor que "ser un".</strong></li>
		<li>Esforzarse por diseños con acoplamiento débil entre los objetos que interactúan.</li>
	</ol>
</section>
<section class="slide" id="decorator9">
	<h2>Repaso de conceptos</h2>
	<p>Como se hace entonces para tener re uso sin usar herencia?</p>
	<p>Hay maneras de hacer heredar comportamiento en tiempo de ejecución a través de la composición y delegación.</p>
	<p>Cuando se hereda comportamiento por subclases ese comportamiento esta seteado en tiempo de compilado, y además todas las subclases heredar el mismo comportamiento, quedando como alternativa la sobreescritura de los métodos heredados como alternativa para cambiar el comportamiento heredado.</p>
	<p>Sin embargo si puedo extender el comportamiento de un objeto a través de composición, puedo adquirirlo o cambiarlo en tiempo de ejecución.</p>
</section>
<section class="slide" id="decorator10">
	<h2>Repaso de conceptos</h2>
	<p>Podemos agregar nuevas responsabilidades a los objetos a través de la composición, Inclusive se pueden agregar responsabilidades que no fueron pensadas por el diseñador de la superclase y sin tocar el código.<BR/>
	En el strategy a un pato se le asignaba una estrategia de vuelo o de quak en tiempo de ejecución.</p>
	<p>Usando composición se puede agregar de manera dinámica nuevas funcionalidades a los objetos escribiendo nuevo código, evitando cambiar el código ya existente, y con esto disminuyendo las chances de introducir bugs o causar efectos no deseados en el código.</p>
</section>
<section class="slide" id="decorator11">
	<h2>Principio de diseño.</h2>
	<h3>Las clases tiene que estar abiertas para la extensión pero cerradas para la modificación.</h3>
	<p>El objetivo es extender clases incorporar nuevos comportamientos si modificar el código existente. (heredar sin modificar el código).</p>
	<p>Se logran diseños que son resistentes al cambio y flexibles para incorporar nuevas funcionalidades y alcanzar los requerimientos de cambio.</p>
	<p>Suena raro abierto para heredar cerrado para modificar pero hay técnicas en la programación orientada a objetos que permiten extender funcionalidad sin cambiar el código, por ejemplo el Observer, agregando nuevos observers al Subject sin sin agregar ningún código. Decorator es un buen ejemplos de este principio.</p>
</section>
<section class="slide" id="decorator12">
	<h2>Principio de diseño.</h2>
	<p>No se puede hacer que todo el código siga este principio.</p>
	<p>Hacer los diseños flexibles y abiertos lleva tiempo y esfuerzo además de agregarle nuevos niveles de abstracción y complejidad al código.</p>
	<p>Nos vamos a concentrar en las áreas que suelen cambiar.</p>
	<p>Para saber cuales áreas cambian mas hay que conocer bien las reglas de negocio.</p>
</section>

<section class="slide" id="decorator88">
	<h2>Referencias</h2>
	<p><strong>Head First Design Patterns</strong></p>
</section>

<!----------------------------------------------------------------------------------------------->
<!-- deck.navigation snippet -->
<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<!-- deck.status snippet -->
<p class="deck-status">
	<span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span>
</p>

<!-- deck.goto snippet -->
<form action="." method="get" class="goto-form">
	<label for="goto-slide">Go to slide:</label>
	<input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
	<datalist id="goto-datalist"></datalist>
	<input type="submit" value="Go">
</form>

<!-- deck.hash snippet -->
<a href="." title="Permalink to this slide" class="deck-permalink">#</a>


<!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../jquery-1.7.2.min.js"><\/script>')</script>

<!-- Deck Core and extensions -->
<script src="../core/deck.core.js"></script>
<script src="../extensions/hash/deck.hash.js"></script>
<script src="../extensions/menu/deck.menu.js"></script>
<script src="../extensions/goto/deck.goto.js"></script>
<script src="../extensions/status/deck.status.js"></script>
<script src="../extensions/navigation/deck.navigation.js"></script>
<script src="../extensions/scale/deck.scale.js"></script>

<!-- Initialize the deck -->
<script>
$(function() {
	$.deck('.slide');
});
</script>

</body>



</html>
